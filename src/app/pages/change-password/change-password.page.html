<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>Cambiar Contraseña</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content class="profile-container">
  <form [formGroup]="changePasswordForm" (ngSubmit)="onChangePassword()" class="profile-name-container">

    <!-- Contraseña actual -->
    <ion-item class="profile-name-input">
      <ion-icon slot="start" name="lock-closed-outline"></ion-icon>
      <ion-input type="password" placeholder="Contraseña Actual" formControlName="actualPassword"></ion-input>
    </ion-item>
    <div class="error-message" *ngIf="changePasswordForm.get('actualPassword')?.invalid && changePasswordForm.get('actualPassword')?.touched">
      Ingresa tu contraseña actual.
    </div>

    <!-- Nueva contraseña -->
    <ion-item class="profile-name-input">
      <ion-icon slot="start" name="lock-closed-outline"></ion-icon>
      <ion-input type="password" placeholder="Nueva Contraseña" formControlName="newPassword"></ion-input>
    </ion-item>
    <div class="error-message" *ngIf="changePasswordForm.get('newPassword')?.invalid && changePasswordForm.get('newPassword')?.touched">
      La nueva contraseña debe tener al menos 8 caracteres.
    </div>

    <!-- Confirmar nueva contraseña -->
    <ion-item class="profile-name-input">
      <ion-icon slot="start" name="lock-closed-outline"></ion-icon>
      <ion-input type="password" placeholder="Repetir Nueva Contraseña" formControlName="confirmNewPassword"></ion-input>
    </ion-item>
    <div class="error-message" *ngIf="changePasswordForm.hasError('notMatching')">
      Las contraseñas no coinciden.
    </div>

    <!-- Botón para cambiar contraseña -->
    <ion-button type="submit" expand="block" color="primary" [disabled]="changePasswordForm.invalid">
      Cambiar Contraseña
    </ion-button>

    <ion-note class="profile-name-input">
      Si no deseas cambiar tu contraseña, haz click <a routerLink="/profile">Aquí</a>.
    </ion-note>
  </form>
</ion-content>
